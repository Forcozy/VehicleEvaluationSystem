import{a as w}from"./axios-Cm0UX6qg.js";import{o as ie}from"./options-BmT-oMWJ.js";import{z as de}from"./zh-cn-BQvgwFPn.js";import{e as pe}from"./en-HEJrwB0q.js";import{_ as ge,k as ve,a,B as fe,C as me,z as _e,o as he,b as r,c as b,d as x,f as t,w as n,F as O,e as D,G as A,H as $,h as B,A as ye,s as ke,p as be,m as Se,E,g as P,i as Ce}from"./index-DXB3kBi2.js";const R=z=>(be("data-v-88717e81"),z=z(),Se(),z),Te=R(()=>D("h6",null,null,-1)),we={class:"container"},xe={key:0},De={class:"container"},ze={key:0},Me={class:"container",style:{display:"flex","align-items":"center"}},Ie={key:0},Fe=R(()=>D("br",null,null,-1)),Ee={__name:"EvaluationInformationTablePage",setup(z){const i=ve(),Y=a("zh-cn"),N=fe(()=>Y.value==="zh-cn"?de:pe),f=a(""),H=[{text:"近7天",value:()=>{const e=new Date,o=new Date;return o.setDate(o.getDate()-7),[o,e]}},{text:"近一个月",value:()=>{const e=new Date,o=new Date;return o.setMonth(o.getMonth()-1),[o,e]}},{text:"近3个月",value:()=>{const e=new Date,o=new Date;return o.setMonth(o.getMonth()-3),[o,e]}},{text:"当天",value:()=>{const e=new Date,o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),l=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);return[o,l]}}];function V(e){const o=new Date(e),l=o.getFullYear(),m=String(o.getMonth()+1).padStart(2,"0"),_=String(o.getDate()).padStart(2,"0"),h=String(o.getHours()).padStart(2,"0"),T=String(o.getMinutes()).padStart(2,"0"),k=String(o.getSeconds()).padStart(2,"0");return`${l}-${m}-${_} ${h}:${T}:${k}`}const U=()=>{if(f.value==="")console.log("都没填情况下不允许查询"),E.error("请填写查询时间");else{const e=V(f.value[0]),o=V(f.value[1]);w.post("/api/daterange_EvaluationInformation",{startDate:e,endDate:o,pageNum:u.value,pageSize:d.value},{headers:{Authorization:i.token,"Content-Type":"application/x-www-form-urlencoded"}}).then(l=>{console.log("axios.post(/api/GetAllDriverData,{},{  ==>"),console.log(l),s.value=l.data.data.items,S.value=l.data.data.total,M()})}},j=a(!1),q=a(!1),J=a(!1),d=a(10),u=a(1),S=a(0);me(()=>{i.token===""&&(console.log("onMounted ========   if (Tokenstore.token === ''){   ===========> "),E.error("登录信息已失效，请重新登录"),P.push("/Login/welcome_login")),w.post("/api/VerifyToken",{token:i.token},{headers:{Authorization:i.token,"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{console.log("打印出返回的json ==>  "),console.log(e),e.data.code===0?console.log("token有效"):(i.removeToken(),E.error("登录信息已过期，请重新登录"),P.push("/Login/welcome_login"),console.log("token无效"))})});const s=a(null),K=()=>{console.log("每页显示条数改变  handleSizeChange  ==>"),console.log("最新每页显示条数  pageSize =>",d.value),console.log("最新当前页码pageNum =>",u.value),y()},W=()=>{console.log("当前页码数改变  handleCurrentChange  ==>"),console.log("最新每页显示条数  pageSize =>",d.value),console.log("最新当前页码pageNum =>",u.value),y()},y=()=>{p.value?(console.log("请求条件判断器 查询今日所有评价数据  if (QueryTodaysInformation_buttonStatus){   ==>"),ae()):g.value?(console.log("请求条件判断器 查询本月所有评价数据  if (QueryTodaysInformation_buttonStatus){   ==>"),ne()):c.value?(console.log("请求条件判断器 查询特定时间段内的所有评价数据  if (QueryTodaysInformation_buttonStatus){   ==>"),U()):(console.log("请求条件判断器 无标志位 查询全部   ==>"),te())},Q=()=>{u.value=1,p.value=!1,I.value.backgroundColor="#409eff",g.value=!1,F.value.backgroundColor="#409eff",c.value=!1,C.value.backgroundColor="#409eff"};_e(f,(e,o)=>{console.log(`myVariable的值从 ${o} 变为 ${e}`),c.value=!1,C.value.backgroundColor="#409eff"});function X(e){const o=new Date(e),l=o.getFullYear(),m=(o.getMonth()+1).toString().padStart(2,"0"),_=o.getDate().toString().padStart(2,"0"),h=o.getHours().toString().padStart(2,"0"),T=o.getMinutes().toString().padStart(2,"0"),k=o.getSeconds().toString().padStart(2,"0");return`${l}-${m}-${_} ${h}:${T}:${k}`}function G(e){switch(Number(e)){case 1:return"不及格";case 2:return"及格";case 3:return"良好";case 4:return"优秀";default:return"未知"}}const M=()=>{for(let e=0;e<s.value.length;e++)s.value[e].evaluationTime=X(s.value[e].evaluationTime),s.value[e].evaluationindicator1=G(s.value[e].evaluationindicator1),s.value[e].evaluationindicator2=G(s.value[e].evaluationindicator2)},I=a({backgroundColor:"#409eff",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer"}),p=a(!1),Z=()=>{console.log("const QueryTodaysInformation_handleButtonClick = () => {    //查询今日的按钮函数    ====>");let e=p.value;Q(),p.value=e.valueOf(),p.value=!p.value,p.value?I.value.backgroundColor="#67c23a":I.value.backgroundColor="#409eff",y()},C=a({backgroundColor:"#409eff",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer"}),c=a(!1),ee=()=>{if(f.value==="")console.log("都没填情况下不允许查询"),E.error("请填写查询时间");else{console.log("const QueryInformationForThisMonth_handleButtonClick = () => {    //查询本月的按钮函数(1)");let e=c.value;Q(),c.value=e,c.value=!c.value,c.value?C.value.backgroundColor="#67c23a":C.value.backgroundColor="#409eff",y()}},F=a({backgroundColor:"#409eff",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer"}),g=a(!1),oe=()=>{console.log("const QueryInformationForThisMonth_handleButtonClick = () => {    //查询本月的按钮函数(1)");let e=g.value;Q(),g.value=e,g.value=!g.value,g.value?F.value.backgroundColor="#67c23a":F.value.backgroundColor="#409eff",y()},te=()=>{w.post("/api/SortingOfEvaluationInformation",{pageSize:d.value,pageNum:u.value},{headers:{Authorization:i.token,"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{console.log("axios.post(/api/SortingOfEvaluationInformation,{},{  ==>"),console.log(e.data.data),s.value=e.data.data.items,S.value=e.data.data.total,M()})};he(()=>{console.log("onMounted ===================> "),y()});const ae=()=>{w.post("/api/QueryAllEvaluationDataForToday",{pageSize:d.value,pageNum:u.value},{headers:{Authorization:i.token,"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{console.log("axios.post(/api/QueryAllEvaluationDataForToday,{},{  ==>"),console.log(e.data.data),s.value=e.data.data.items,S.value=e.data.data.total,M()})},ne=()=>{w.post("/api/QueryAllEvaluationDataForThisMonth",{pageSize:d.value,pageNum:u.value},{headers:{Authorization:i.token,"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{console.log("axios.post(/api/QueryAllEvaluationDataForThisMonth,{},{  ==>"),console.log(e.data.data),s.value=e.data.data.items,S.value=e.data.data.total,M()})};return(e,o)=>{const l=r("Check"),m=r("el-icon"),_=r("el-button"),h=r("el-col"),T=r("el-date-picker"),k=r("el-config-provider"),L=r("el-row"),le=r("el-table-column"),se=r("el-table"),re=r("el-pagination"),ue=r("el-card");return b(),x(O,null,[Te,t(ue,null,{default:n(()=>[t(L,{gutter:20,class:"header"},{default:n(()=>[t(h,{span:4},{default:n(()=>[D("div",we,[t(_,{onClick:Z,style:A(I.value)},{default:n(()=>[p.value?(b(),x("div",xe,[t(m,{class:"el-icon-check"},{default:n(()=>[t(l)]),_:1})])):$("",!0),B(" 查询今日所有评价数据 ")]),_:1},8,["style"])])]),_:1}),t(h,{span:4},{default:n(()=>[D("div",De,[t(_,{onClick:oe,style:A(F.value)},{default:n(()=>[g.value?(b(),x("div",ze,[t(m,{class:"el-icon-check"},{default:n(()=>[t(l)]),_:1})])):$("",!0),B(" 查询本月所有评价数据 ")]),_:1},8,["style"])])]),_:1}),t(h,{span:13},{default:n(()=>[t(k,{locale:N.value},{default:n(()=>[D("div",Me,[t(T,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=v=>f.value=v),type:"datetimerange",shortcuts:H,"range-separator":"到","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"]),t(_,{type:"primary",style:A([{"margin-left":"10px"},C.value]),onClick:ee},{default:n(()=>[c.value?(b(),x("div",Ie,[t(m,{class:"el-icon-check"},{default:n(()=>[t(l)]),_:1})])):$("",!0),B(" 查询特定时间段内的数据 ")]),_:1},8,["style"])])]),_:1},8,["locale"])]),_:1})]),_:1}),t(L,{gutter:20,class:"header"}),t(se,{data:s.value,border:"",stripe:"",style:{width:"100%"}},{default:n(()=>[(b(!0),x(O,null,ye(ke(ie),(v,ce)=>(b(),Ce(le,{prop:v.prop,label:v.label,key:ce},null,8,["prop","label"]))),128))]),_:1},8,["data"]),Fe,t(k,{locale:N.value},{default:n(()=>[t(re,{"current-page":u.value,"onUpdate:currentPage":o[1]||(o[1]=v=>u.value=v),"page-size":d.value,"onUpdate:pageSize":o[2]||(o[2]=v=>d.value=v),"page-sizes":[10,20,30,40],small:j.value,disabled:J.value,background:q.value,layout:"total, sizes, prev, pager, next, jumper",total:S.value,onSizeChange:K,onCurrentChange:W},null,8,["current-page","page-size","small","disabled","background","total"])]),_:1},8,["locale"])]),_:1})],64)}}},Ve=ge(Ee,[["__scopeId","data-v-88717e81"]]);export{Ve as default};
